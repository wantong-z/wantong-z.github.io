<!DOCTYPE html>
<html>
<head>
    <title>Project 1</title>
    <style>
        body {
            font-family: Times New Roman, sans-serif;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding: 20px;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }
        
        figure {
            text-align: center;
            margin: 10px;
            width: 220px;
        }
        
        figure img {
            width: 100%;  /* Responsive to figure */
            height: auto;
            display: block;
            margin-bottom: 5px;
        }

        h1, h2, p {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Project 1</h1>
    <p>This page showcases the results for Project 1.</p>

    <h2>Overview</h2>
    <p>This project implements color image alignment based on Prokudin-Gorskii’s glass plate negatives. 
      Each input image consists of three vertically stacked grayscale exposures of the same scene, representing the blue, green, and red channels respectively. 
      The goal is to extract these channels, align them properly using pyramid-based search, and reconstruct a single aligned RGB color image.</p>

    <h2>Approach</h2>
    <p>We start by splitting the input image into three equal vertical slices for blue, green, and red channels. 
      To align the channels, we treat the blue channel as the reference and align the green and red channels to it. 
      We implemented exhaustive search using normalized cross-correlation (NCC) as the similarity metric. 
      To improve efficiency and robustness, we used an image pyramid strategy: we recursively align smaller downsampled versions of the images first, then refine the shifts at higher resolutions.</p>

    <h2>Problems & Fixes</h2>
    <p>
      Initially, the red layer was consistently misaligned, especially in the emir.tif image. 
      The resulting image appeared heavily blurred and had colored ghosting artifacts. 
      We suspected the misalignment came from the scoring function being too sensitive to edges or noise. 
      To address this, we: 1. Switched from using the full image to using center crops for scoring. 
      2. Added blurring via custom convolution before downsampling. 
      3. Added pyramid alignment to avoid being trapped in local optima at high resolution. 
      4. These changes significantly improved alignment quality.
    </p>

    <h2>Results</h2>
    <p>Below are results from the JPG images.</p>
    <div class="row">
      <figure>
        <img src="./media/cathedral_output.jpg" alt="Cathedral">
        <figcaption>Offsets used: Blue shift (–2, –5), Red shift (1, 7)</figcaption>
      </figure>
    
      <figure>
        <img src="./media/monastery_output.jpg" alt="Monastery">
        <figcaption>Offsets used: Blue shift (–2, 3), Red shift (1, 6)</figcaption>
      </figure>
    
      <figure>
        <img src="./media/tobolsk_output.jpg" alt="Tobolsk">
        <figcaption>Offsets used: Blue shift (–3, –3), Red shift (1, 4)</figcaption>
      </figure>
    </div>

    <p>Below are results from the TIF images.</p>

    <div class="row">
        <figure>
            <img src="./media/church_output.jpg" alt="Church">
            <figcaption>Offsets used: Blue shift (-4, -25), Red shift (-8, 33)</figcaption>
        </figure>
        
        <figure>
            <img src="./media/emir_output.jpg" alt="Emir">
            <figcaption>Offsets used: Blue shift (-24, -48), Red shift (17, 57)</figcaption>
        </figure>

        <figure>
            <img src="./media/harvesters_output.jpg" alt="Harvesters">
            <figcaption>Offsets used: Blue shift (-17, -59), Red shift (-3, 65)</figcaption>
        </figure>

        <figure>
            <img src="./media/icon_output.jpg" alt="Icon">
            <figcaption>Offsets used: Blue shift (-17, -41), Red shift (5, 49)</figcaption>
        </figure>

        <figure>
            <img src="./media/italil_output.jpg" alt="Italil">
            <figcaption>Offsets used: Blue shift (-21, -38), Red shift (15, 39)</figcaption>
        </figure>

        <figure>
            <img src="./media/lastochikino_output.jpg" alt="Lastochikino">
            <figcaption>Offsets used: Blue shift (2, 3), Red shift (-7, 78)</figcaption>
        </figure>
    </div>

    <div class="row">
        <figure>
            <img src="./media/lugano_output.jpg" alt="Lugano">
            <figcaption>Offsets used: Blue shift (16, -41), Red shift (-13, 52)</figcaption>
        </figure>

        <figure>
            <img src="./media/melons_output.jpg" alt="Melons">
            <figcaption>Offsets used: Blue shift (-10, -83), Red shift (3, 94)</figcaption>
        </figure>

        <figure>
            <img src="./media/self_portrait_output.jpg" alt="Self portrait">
            <figcaption>Offsets used: Blue shift (-29, -78), Red shift (8, 94)</figcaption>
        </figure>
        
        <figure>
            <img src="./media/siren_output.jpg" alt="Siren">
            <figcaption>Offsets used: Blue shift (5, -50), Red shift (-19, 47)</figcaption>
        </figure>

        <figure>
            <img src="./media/three_generations_output.jpg" alt="Three generations">
            <figcaption>Offsets used: Blue shift (-14, -52), Red shift(-3, 59)</figcaption>
        </figure>
    </div>
            
</body>
</html>
